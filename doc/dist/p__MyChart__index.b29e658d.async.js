"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[743],{90901:function(q,F,n){n.r(F);var v=n(15009),x=n.n(v),z=n(99289),E=n.n(z),G=n(97857),p=n.n(G),w=n(5574),b=n.n(w),B=n(73829),V=n(35312),U=n(2453),$=n(74467),L=n(4393),g=n(7134),P=n(29905),j=n(9276),l=n(67294),O=n(33076),r=n(85893),H=function(){var N={current:1,pageSize:4,sortField:"createTime",sortOrder:"desc"},R=(0,l.useState)(p()({},N)),W=b()(R,2),h=W[0],A=W[1],S=(0,V.useModel)("@@initialState"),I=S.initialState,K=I!=null?I:{},t=K.currentUser,a=(0,l.useState)(),_=b()(a,2),i=_[0],e=_[1],m=(0,l.useState)(0),D=b()(m,2),d=D[0],y=D[1],o=(0,l.useState)(!0),Z=b()(o,2),X=Z[0],Y=Z[1],k=function(){var M=E()(x()().mark(function u(){var f,J,Q;return x()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return Y(!0),s.prev=1,s.next=4,(0,B.MW)(h);case 4:f=s.sent,f.data?(e((J=f.data.records)!==null&&J!==void 0?J:[]),y((Q=f.data.total)!==null&&Q!==void 0?Q:0),f.data.records&&f.data.records.forEach(function(c){if(c.status==="succeed"){var C,ne=JSON.parse((C=c.genChart)!==null&&C!==void 0?C:"{}");ne.title=void 0,c.genChart=JSON.stringify(ne)}})):U.ZP.error("\u83B7\u53D6\u6211\u7684\u56FE\u8868\u5931\u8D25"),s.next=11;break;case 8:s.prev=8,s.t0=s.catch(1),U.ZP.error("\u83B7\u53D6\u6211\u7684\u56FE\u8868\u5931\u8D25\uFF0C"+s.t0.message);case 11:Y(!1);case 12:case"end":return s.stop()}},u,null,[[1,8]])}));return function(){return M.apply(this,arguments)}}();return(0,l.useEffect)(function(){k()},[h]),(0,r.jsxs)("div",{className:"my-chart-page",children:[(0,r.jsx)("div",{children:(0,r.jsx)(O.Z,{placeholder:"\u8BF7\u8F93\u5165\u56FE\u8868\u540D\u79F0",enterButton:!0,loading:X,onSearch:function(u){A(p()(p()({},N),{},{name:u}))}})}),(0,r.jsx)("div",{className:"margin-16"}),(0,r.jsx)($.Z,{grid:{gutter:16,xs:1,sm:1,md:1,lg:2,xl:2,xxl:2},pagination:{onChange:function(u,f){A(p()(p()({},h),{},{current:u,pageSize:f}))},current:h.current,pageSize:h.pageSize,total:d},loading:X,dataSource:i,renderItem:function(u){var f;return(0,r.jsx)($.Z.Item,{children:(0,r.jsxs)(L.Z,{style:{width:"100%"},children:[(0,r.jsx)($.Z.Item.Meta,{avatar:(0,r.jsx)(g.C,{src:t&&t.userAvatar}),title:u.name,description:u.chartType?"\u56FE\u8868\u7C7B\u578B\uFF1A"+u.chartType:void 0}),(0,r.jsxs)(r.Fragment,{children:[u.status==="wait"&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(P.ZP,{status:"warning",title:"\u5F85\u751F\u6210",subTitle:(f=u.execMessage)!==null&&f!==void 0?f:"\u5F53\u524D\u56FE\u8868\u751F\u6210\u961F\u5217\u7E41\u5FD9\uFF0C\u8BF7\u8010\u5FC3\u7B49\u5019"})}),u.status==="running"&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(P.ZP,{status:"info",title:"\u56FE\u8868\u751F\u6210\u4E2D",subTitle:u.execMessage})}),u.status==="succeed"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{marginBottom:16}}),(0,r.jsx)("p",{children:"\u5206\u6790\u76EE\u6807\uFF1A"+u.goal}),(0,r.jsx)("div",{style:{marginBottom:16}}),(0,r.jsx)(j.Z,{option:u.genChart&&JSON.parse(u.genChart)})]}),u.status==="failed"&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(P.ZP,{status:"error",title:"\u56FE\u8868\u751F\u6210\u5931\u8D25",subTitle:u.execMessage})})]})]})},u.id)}})]})};F.default=H},73829:function(q,F,n){n.d(F,{I6:function(){return O},MW:function(){return A},VG:function(){return j},bq:function(){return W}});var v=n(52677),x=n.n(v),z=n(15009),E=n.n(z),G=n(97857),p=n.n(G),w=n(99289),b=n.n(w),B=n(35312);function V(t,a){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime().mark(function t(a,_){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/chart/add",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:a},_||{})));case 1:case"end":return e.stop()}},t)})),U.apply(this,arguments)}function $(t,a){return L.apply(this,arguments)}function L(){return L=_asyncToGenerator(_regeneratorRuntime().mark(function t(a,_){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/chart/delete",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:a},_||{})));case 1:case"end":return e.stop()}},t)})),L.apply(this,arguments)}function g(t,a){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function t(a,_){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/chart/edit",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:a},_||{})));case 1:case"end":return e.stop()}},t)})),P.apply(this,arguments)}function j(t,a,_,i){return l.apply(this,arguments)}function l(){return l=b()(E()().mark(function t(a,_,i,e){var m;return E()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return m=new FormData,i&&m.append("file",i),Object.keys(_).forEach(function(y){var o=_[y];o!=null&&m.append(y,x()(o)==="object"&&!(o instanceof File)?JSON.stringify(o):o)}),d.abrupt("return",(0,B.request)("/api/chart/gen",p()({method:"POST",params:p()({},a),data:m,requestType:"form"},e||{})));case 4:case"end":return d.stop()}},t)})),l.apply(this,arguments)}function O(t,a,_,i){return r.apply(this,arguments)}function r(){return r=b()(E()().mark(function t(a,_,i,e){var m;return E()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return m=new FormData,i&&m.append("file",i),Object.keys(_).forEach(function(y){var o=_[y];o!=null&&m.append(y,x()(o)==="object"&&!(o instanceof File)?JSON.stringify(o):o)}),d.abrupt("return",(0,B.request)("/api/chart/gen/async",p()({method:"POST",params:p()({},a),data:m,requestType:"form"},e||{})));case 4:case"end":return d.stop()}},t)})),r.apply(this,arguments)}function H(t,a,_,i){return T.apply(this,arguments)}function T(){return T=_asyncToGenerator(_regeneratorRuntime().mark(function t(a,_,i,e){var m;return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return m=new FormData,i&&m.append("file",i),Object.keys(_).forEach(function(y){var o=_[y];o!=null&&m.append(y,_typeof(o)==="object"&&!(o instanceof File)?JSON.stringify(o):o)}),d.abrupt("return",request("/api/chart/gen/async/mq",_objectSpread({method:"POST",params:_objectSpread({},a),data:m,requestType:"form"},e||{})));case 4:case"end":return d.stop()}},t)})),T.apply(this,arguments)}function N(t,a){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime().mark(function t(a,_){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/chart/get",_objectSpread({method:"GET",params:_objectSpread({},a)},_||{})));case 1:case"end":return e.stop()}},t)})),R.apply(this,arguments)}function W(t,a){return h.apply(this,arguments)}function h(){return h=b()(E()().mark(function t(a,_){return E()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,B.request)("/api/chart/list/page",p()({method:"POST",headers:{"Content-Type":"application/json"},data:a},_||{})));case 1:case"end":return e.stop()}},t)})),h.apply(this,arguments)}function A(t,a){return S.apply(this,arguments)}function S(){return S=b()(E()().mark(function t(a,_){return E()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,B.request)("/api/chart/my/list/page",p()({method:"POST",headers:{"Content-Type":"application/json"},data:a},_||{})));case 1:case"end":return e.stop()}},t)})),S.apply(this,arguments)}function I(t,a){return K.apply(this,arguments)}function K(){return K=_asyncToGenerator(_regeneratorRuntime().mark(function t(a,_){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/chart/update",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:a},_||{})));case 1:case"end":return e.stop()}},t)})),K.apply(this,arguments)}},33076:function(q,F,n){var v=n(67294),x=n(25783),z=n(93967),E=n.n(z),G=n(42550),p=n(96159),w=n(10932),b=n(53124),B=n(98675),V=n(4173),U=n(82586),$=function(g,P){var j={};for(var l in g)Object.prototype.hasOwnProperty.call(g,l)&&P.indexOf(l)<0&&(j[l]=g[l]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function")for(var O=0,l=Object.getOwnPropertySymbols(g);O<l.length;O++)P.indexOf(l[O])<0&&Object.prototype.propertyIsEnumerable.call(g,l[O])&&(j[l[O]]=g[l[O]]);return j};const L=v.forwardRef((g,P)=>{const{prefixCls:j,inputPrefixCls:l,className:O,size:r,suffix:H,enterButton:T=!1,addonAfter:N,loading:R,disabled:W,onSearch:h,onChange:A,onCompositionStart:S,onCompositionEnd:I}=g,K=$(g,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:t,direction:a}=v.useContext(b.E_),_=v.useRef(!1),i=t("input-search",j),e=t("input",l),{compactSize:m}=(0,V.ri)(i,a),D=(0,B.Z)(s=>{var c;return(c=r!=null?r:m)!==null&&c!==void 0?c:s}),d=v.useRef(null),y=s=>{s!=null&&s.target&&s.type==="click"&&h&&h(s.target.value,s,{source:"clear"}),A==null||A(s)},o=s=>{var c;document.activeElement===((c=d.current)===null||c===void 0?void 0:c.input)&&s.preventDefault()},Z=s=>{var c,C;h&&h((C=(c=d.current)===null||c===void 0?void 0:c.input)===null||C===void 0?void 0:C.value,s,{source:"input"})},X=s=>{_.current||R||Z(s)},Y=typeof T=="boolean"?v.createElement(x.Z,null):null,k=`${i}-button`;let M;const u=T||{},f=u.type&&u.type.__ANT_BUTTON===!0;f||u.type==="button"?M=(0,p.Tm)(u,Object.assign({onMouseDown:o,onClick:s=>{var c,C;(C=(c=u==null?void 0:u.props)===null||c===void 0?void 0:c.onClick)===null||C===void 0||C.call(c,s),Z(s)},key:"enterButton"},f?{className:k,size:D}:{})):M=v.createElement(w.ZP,{className:k,type:T?"primary":void 0,size:D,disabled:W,key:"enterButton",onMouseDown:o,onClick:Z,loading:R,icon:Y},T),N&&(M=[M,(0,p.Tm)(N,{key:"addonAfter"})]);const J=E()(i,{[`${i}-rtl`]:a==="rtl",[`${i}-${D}`]:!!D,[`${i}-with-button`]:!!T},O),Q=s=>{_.current=!0,S==null||S(s)},ee=s=>{_.current=!1,I==null||I(s)};return v.createElement(U.Z,Object.assign({ref:(0,G.sQ)(d,P),onPressEnter:X},K,{size:D,onCompositionStart:Q,onCompositionEnd:ee,prefixCls:e,addonAfter:M,suffix:H,onChange:y,className:J,disabled:W}))});F.Z=L}}]);
